#!/bin/bash


app_location="cmd/harvest/main.go"

install () {
	go mod download && go mod verify
}

generate () {
	swag init -g ./$app_location $@
}

build () {
	generate
	go build -o server $app_location $@
}

run () {
	generate
	go run $app_location $@
}

dev () {
	reflex -c ./reflex.conf $@
}

prod () {
	build
	./server
}

test () {
	go test -v $(go list ./tests/... | grep -v /mocks) -coverpkg $(go list ./pkg/... | grep -v /utils) $@
}

lint () {
	golangci-lint run --issues-exit-code 0 --enable-all $@
}

format () {
	lint --fix $@
}

$@